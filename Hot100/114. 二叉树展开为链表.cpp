//
// Created by Mike on 2021/8/16.
//

/*
 * 114. äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨
 * ç»™ä½ äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ root ï¼Œè¯·ä½ å°†å®ƒå±•å¼€ä¸ºä¸€ä¸ªå•é“¾è¡¨ï¼š
 * - å±•å¼€åŽçš„å•é“¾è¡¨åº”è¯¥åŒæ ·ä½¿ç”¨ TreeNode ï¼Œ
 *   å…¶ä¸­ right å­æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œè€Œå·¦å­æŒ‡é’ˆå§‹ç»ˆä¸º null ã€‚
 * - å±•å¼€åŽçš„å•é“¾è¡¨åº”è¯¥ä¸ŽäºŒå‰æ ‘ å…ˆåºéåŽ† é¡ºåºç›¸åŒ.
 */

/*
        1
       / \
      2   5
     / \   \
    3   4   6

 1) å°† 1 çš„å·¦å­æ ‘æ’å…¥åˆ°å³å­æ ‘çš„åœ°æ–¹:
       1
         \
          2         5
         / \         \
        3   4         6

2) å°†åŽŸæ¥çš„å³å­æ ‘æŽ¥åˆ°å·¦å­æ ‘çš„æœ€å³è¾¹èŠ‚ç‚¹:
        1
         \
          2
         / \
        3   4
             \
              5
               \
                6

3) å°† 2 çš„å·¦å­æ ‘æ’å…¥åˆ°å³å­æ ‘çš„åœ°æ–¹:
    1
     \
      2
       \
        3       4
                 \
                  5
                   \
                    6

4) å°†åŽŸæ¥çš„å³å­æ ‘æŽ¥åˆ°å·¦å­æ ‘çš„æœ€å³è¾¹èŠ‚ç‚¹:
    1
     \
      2
       \
        3
         \
          4
           \
            5
             \
              6
 */
class Solution {
public:
    void flatten(TreeNode* root) {
        while (root) {
            if(!root->left) {
                root = root->right;
            } else {
                // æ‰¾å·¦å­æ ‘æœ€å³è¾¹çš„èŠ‚ç‚¹
                TreeNode* pre = root->left;
                while(pre->right) {
                    pre = pre->right;
                }
                // å°†åŽŸæ¥çš„å³å­æ ‘æŽ¥åˆ°å·¦å­æ ‘çš„æœ€å³è¾¹èŠ‚ç‚¹
                pre->right = root->right;
                // å°†å·¦å­æ ‘æ’å…¥åˆ°å³å­æ ‘çš„åœ°æ–¹
                root->right = root->left;
                // åŽŸæ¥å·¦å­ðŸŒ²ç½®ç©º
                root->left = nullptr;
                // éåŽ†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
                root = root->right;
            }
        }
    }
};